% Process input of form `Key:Value`
\NewDocumentCommand{\ProcessPair}{ m m }{%
    \StrCut{#2}{:}\Key\Value%
    #1{\Key}{\Value}%
}


% Process input of form `Item1, Item2, ...`
\NewDocumentCommand{\ProcessVector}{ m m O{} }{%
    {%
        \newcommand{\isFirstIteration}{1}%
        \setsepchar{,}%
        \readlist*\looplist{#2}%
        \foreachitem \n \in \looplist{%
            \ifthenelse{\isFirstIteration = 1}{%
                \renewcommand{\isFirstIteration}{0}%
            }{#3}%
            #1{\n}%
        }%
    }%
}


% Process input of form `K1:V1, K2:V2, ...`.
\NewDocumentCommand{\ProcessMap}{ m m O{} }{%
    {%
        \newcommand{\tmpFn}[1]{\ProcessPair{#1}{##1}}%
        \ProcessVector{\tmpFn}{#2}[#3]%
    }%
}


% NOTE: Could be broaden to broader functionality.
\NewDocumentCommand{\textoverset}{ O{1pt} m m }{%
    \tikz[baseline=(Baseline.base)]{%
        \node[inner sep=0pt,
              outer sep=0pt,
              label={[inner sep=0pt,
                      outer sep=0pt,
                      font=\tiny\itshape,
                      yshift=#1] #3}] (Baseline) {#2};%
    }%
}


% Extracts value from dimen.
% https://tex.stackexchange.com/questions/15001/getting-length-as-number
\newcommand*{\getlength}[2]{%
   \pgfmathsetmacro#1{#2}%  Result in `pt`
   % Or:
   %\pgfmathsetmacro#1{0.0351459804*#2}%  Result in `cm`
}


% https://tex.stackexchange.com/a/300215/192286
\ExplSyntaxOn
\DeclareExpandableDocumentCommand{\dorepeate}{O{}mm}
 {
      \int_compare:nT { #2 > 0 }
       {
            #3 \prg_replicate:nn { #2 - 1 } { #1#3 }
       }
 }
\ExplSyntaxOff


\NewDocumentCommand{\rsCodeAux}{ s m }{%
   \texttt{\IfBooleanTF{#1}{\textbackslash}\,#2}%
}

\NewDocumentCommand{\rsOptionsAux}{ s O{options} }{%
   \texttt{\IfBooleanTF{#1}{\textbackslash}<\textcolor{red!75}{#2}>}%
}

\NewDocumentCommand{\rsArgAux}{ s O{clist} O{} }{%
   \texttt{\IfBooleanTF{#1}{\textbackslash}<\textcolor{blue!75}{#2}>\textcolor{blue!75}{#3}}%
}

\NewDocumentCommand{\rsTypeAux}{ s O{cmd} }{%
   \texttt{\IfBooleanTF{#1}{\textbackslash}\textcolor{ForestGreen!75}{#2}}%
}


\NewDocumentCommand{\rsNameref}{ m }{%
    \ref{#1} <<\textit{\nameref{#1}}>>%
}